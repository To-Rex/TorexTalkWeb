import{r as s,j as e}from"./ui-E7op3xd6.js";import{u as z,L as j}from"./router-pxkjurEI.js";import{p as D,u as L,B as l}from"./index-DGb-t3le.js";import{C as O,a as G,b as H,c as T,d as B,E as _,e as I,f as U,g as X,A as Y,F as J,G as K,h as Q}from"./card-nkPSPQWE.js";import{m as c}from"./motion-wg93wq_x.js";import"./vendor-Bs7gn1Hv.js";import"./query-28qq_-a4.js";const p={hidden:{opacity:0,y:16},show:(d=0)=>({opacity:1,y:0,transition:{delay:d*.06,duration:.5}})};function ie(){const{t:d}=D(),{user:N,login:k,oauthSignIn:C}=L(),m=z(),[v,E]=s.useState(""),[b,S]=s.useState(""),[w,r]=s.useState(null),[t,M]=s.useState(!1),[y,$]=s.useState(!1),[o,u]=s.useState(!1),[F,P]=s.useState(!1),[n,q]=s.useState({x:50,y:50}),h=s.useRef({x:50,y:50});s.useEffect(()=>{const a=i=>{const f=document.body.getBoundingClientRect();h.current.x=(i.clientX-f.left)/f.width*100,h.current.y=(i.clientY-f.top)/f.height*100},g=()=>{q(i=>({x:i.x+(h.current.x-i.x)*.05,y:i.y+(h.current.y-i.y)*.05})),requestAnimationFrame(g)};return window.matchMedia("(prefers-reduced-motion: reduce)").matches||(g(),window.addEventListener("mousemove",a)),()=>window.removeEventListener("mousemove",a)},[]),s.useEffect(()=>{N?m("/app"):P(!0)},[N,m]);const A=()=>t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v)?b.length<6?(r("Parol kamida 6 ta belgidan iborat bo'lishi kerak"),!1):(r(null),!0):(r("Email noto'g'ri formatda"),!1):(r("Davom etishdan oldin Oferta va Maxfiylik siyosatiga rozilik bering"),!1),R=async a=>{if(a.preventDefault(),!A())return;u(!0);const g=await k(v,b);if(u(!1),!g)return r("Noto'g'ri email yoki parol");m("/app")},x=async a=>{if(!t){r("Davom etishdan oldin Oferta va Maxfiylik siyosatiga rozilik bering");return}r(null),u(!0),await C(a,{email:`${a}_${Math.random().toString(36).slice(2)}@torex.com`,name:`${a[0].toUpperCase()}${a.slice(1)} User`}),u(!1),m("/app")};return F?e.jsx("div",{className:"bg-gradient-to-b from-background to-secondary/20",style:{background:`radial-gradient(circle at ${n.x}% ${n.y}%, hsl(var(--primary) / 0.1) 0%, transparent 50%), radial-gradient(circle at ${n.x+30}% ${n.y-30}%, hsl(var(--accent) / 0.1) 0%, transparent 50%), radial-gradient(circle at ${n.x-30}% ${n.y+30}%, hsl(var(--secondary) / 0.1) 0%, transparent 50%), linear-gradient(135deg, hsl(var(--background)) 0%, hsl(var(--secondary) / 0.2) 100%)`},children:e.jsx("section",{className:"container py-10 sm:py-16 min-h-[calc(100vh-3.5rem)] flex items-center",children:e.jsx(c.div,{initial:"hidden",animate:"show",className:"mx-auto max-w-lg",children:e.jsxs(O,{className:"overflow-hidden border-0 shadow-lg shadow-primary/10",children:[e.jsxs(G,{className:"text-center pb-2",children:[e.jsx(c.div,{variants:p,className:"mx-auto h-12 w-12 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:"/logo.png",alt:"TorexTalk",className:"h-12 w-12"})}),e.jsxs(c.div,{variants:p,custom:1,children:[e.jsx(H,{className:"text-2xl sm:text-3xl font-extrabold tracking-tight bg-gradient-to-r from-foreground to-primary bg-clip-text text-transparent",children:d("sign_in")}),e.jsx(T,{className:"mt-1 text-muted-foreground",children:"Hisobingizga kiring yoki ijtimoiy tarmoqlar orqali davom eting"})]})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs(c.form,{onSubmit:R,className:"space-y-3",variants:p,custom:2,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm",children:"Email"}),e.jsx("input",{value:v,onChange:a=>E(a.target.value),placeholder:"email@domain.com",className:"w-full rounded-md bg-secondary px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-sm",children:"Parol"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",value:b,onChange:a=>S(a.target.value),placeholder:"••••••••",className:"w-full rounded-md bg-secondary px-3 py-2 pr-10 focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("button",{type:"button","aria-label":y?"Parolni yashirish":"Parolni ko'rsatish",className:"absolute inset-y-0 right-0 px-3 text-muted-foreground hover:text-foreground",onClick:()=>$(a=>!a),children:y?e.jsx(_,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})})]})]}),w?e.jsx("div",{className:"text-sm text-destructive",children:w}):null,e.jsxs("div",{className:"flex items-start gap-2 pt-1",children:[e.jsx(U,{id:"accept",checked:t,onCheckedChange:a=>M(!!a)}),e.jsxs("label",{htmlFor:"accept",className:"text-xs leading-5 text-muted-foreground",children:["Men ",e.jsx(j,{to:"/terms",className:"underline",children:"Oferta"})," va "," ",e.jsx(j,{to:"/privacy",className:"underline",children:"Maxfiylik siyosati"})," shartlariga roziman"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsx(l,{type:"submit",disabled:!t||o,children:d("sign_in")}),e.jsx(j,{to:"/register",className:"text-sm text-muted-foreground underline",children:"Ro'yxatdan o'tish"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":!0,children:e.jsx("div",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"yoki"})})]}),e.jsxs(c.div,{variants:p,custom:3,className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs(l,{variant:"outline",className:"w-full transition-all hover:scale-[1.02] hover:bg-[#4285F4]/15 hover:text-foreground/90 hover:border-[#4285F4]/30",disabled:!t||o,onClick:()=>x("google"),children:[e.jsx(X,{className:"mr-2 h-4 w-4"})," Google bilan"]}),e.jsxs(l,{variant:"outline",className:"w-full transition-all hover:scale-[1.02] hover:bg-black/10 dark:hover:bg-white/10 hover:text-foreground/90 hover:border-foreground/20",disabled:!t||o,onClick:()=>x("apple"),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Apple bilan"]}),e.jsxs(l,{variant:"outline",className:"w-full transition-all hover:scale-[1.02] hover:bg-[#1877F2]/15 hover:text-foreground/90 hover:border-[#1877F2]/30",disabled:!t||o,onClick:()=>x("facebook"),children:[e.jsx(J,{className:"mr-2 h-4 w-4"})," Facebook bilan"]}),e.jsxs(l,{variant:"outline",className:"w-full transition-all hover:scale-[1.02] hover:bg-black/10 dark:hover:bg-white/10 hover:text-foreground/90 hover:border-foreground/20",disabled:!t||o,onClick:()=>x("github"),children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," GitHub bilan"]})]})]}),e.jsx(Q,{className:"justify-center text-xs text-muted-foreground",children:"Davom etish orqali siz yuqoridagi shartlarni qabul qilgan bo'lasiz"})]})})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Tekshirilmoqda..."})]})})}export{ie as default};
