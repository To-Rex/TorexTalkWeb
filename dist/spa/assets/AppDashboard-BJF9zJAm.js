const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CeTBpfkd.js","assets/ui-xoAc03Am.js","assets/vendor-SrRW2L_K.js","assets/query-CtxFzeRg.js","assets/router-BitaiO6o.js","assets/motion-BNUFpjFX.js","assets/index-wZrJI0Ck.css"])))=>i.map(i=>d[i]);
import{j as e,r as s,o as be,b as ia,M as ra,c as oa,N as la,u as Le,P as le,e as W,A as je,d as ye,i as da,O as ca,Q as ma,U as ha,W as xa,X as ua,D as pa,C as ga,s as fa,Y as va,Z as ka,$ as we,a0 as ba,a1 as Ne,a2 as Ce,a3 as Se,a4 as La,a5 as ja,a6 as De,a7 as ya,a8 as wa,a9 as Ie,aa as Na,ab as Me,ac as Ca,ad as Sa,ae as Pe,af as Ae,ag as Re,ah as _e}from"./ui-xoAc03Am.js";import{I as H}from"./input-6btj5uWw.js";import{c as G,a as D,C as Da,b as Ia,X as te,u as Z,D as de,d as ce,B as S,e as me,f as _,g as oe,h as Ma,i as Pa,j as Aa,k as Ra,l as _a,_ as se,m as pe}from"./index-CeTBpfkd.js";import{C as he}from"./chevron-down-D6D0vzey.js";import"./vendor-SrRW2L_K.js";import"./query-CtxFzeRg.js";import"./router-BitaiO6o.js";import"./motion-BNUFpjFX.js";const Ta=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Oa=G("arrow-left",Ta);const za=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fa=G("calendar",za);const qa=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ea=G("chevron-up",qa);const Ga=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ba=G("ellipsis-vertical",Ga);const $a=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Ua=G("mic",$a);const Ka=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Ja=G("paperclip",Ka);const Qa=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ha=G("search",Qa);const Ya=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Za=G("send",Ya);function ge({className:a,...n}){return e.jsx("div",{className:D("animate-pulse rounded-md bg-muted",a),...n})}function fe({chats:a,currentId:n,onSelect:t,onCreateChat:o,user:i,collapsed:r=!1,onToggleCollapsed:d,loadingPrivate:x=!1,loadingGroups:L=!1,emptyMessage:v="Chatlar yo'q",tab:u="private",onTabChange:l}){const[k,w]=s.useState(""),g=k.trim().toLowerCase(),p=a.filter(f=>f.type===u&&(!g||f.name.toLowerCase().includes(g))),I=g?[{name:"Dilshodjon Haydarov",type:"private"},{name:"Frontend Devs",type:"group"},{name:"Marketing",type:"group"},{name:"Support",type:"private"}].filter(f=>f.type===u&&f.name.toLowerCase().includes(g)&&!a.some(M=>M.type===f.type&&M.name===f.name)):[];return e.jsxs("aside",{className:`${r?"w-16":"w-full md:w-64 lg:w-72"} border-r bg-secondary/30 flex flex-col h-full min-h-0 transition-all duration-200`,children:[d&&e.jsxs("div",{className:"flex justify-between items-center p-2 shrink-0",children:[!r&&e.jsx("div",{className:"text-sm font-medium",children:"Chat"}),e.jsx("button",{onClick:d,className:"inline-flex items-center justify-center rounded-md p-2 text-sm hover:bg-background","aria-label":r?"Expand sidebar":"Collapse sidebar",title:r?"Kengaytirish":"Qisqartirish",children:r?e.jsx(Da,{className:"h-4 w-4"}):e.jsx(Ia,{className:"h-4 w-4"})})]}),!r&&e.jsxs("div",{className:"p-3 flex gap-2 shrink-0",children:[e.jsx("button",{onClick:()=>l?.("private"),className:`flex-1 px-3 py-2 rounded-md text-sm ${u==="private"?"bg-background":"hover:bg-background/50"}`,children:"Private"}),e.jsx("button",{onClick:()=>l?.("group"),className:`flex-1 px-3 py-2 rounded-md text-sm ${u==="group"?"bg-background":"hover:bg-background/50"}`,children:"Groups"})]}),!r&&e.jsx("div",{className:"px-3 pb-2 shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ha,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(H,{value:k,onChange:f=>w(f.target.value),placeholder:u==="private"?"Foydalanuvchi qidirish":"Guruh qidirish",className:"pl-8 pr-8"}),k?e.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>w(""),"aria-label":"Tozalash",children:e.jsx(te,{className:"h-4 w-4"})}):null]})}),e.jsx("div",{className:"p-2 space-y-1 flex-1 min-h-0 overflow-y-auto",children:u==="private"&&x||u==="group"&&L?Array.from({length:4}).map((f,M)=>e.jsxs("div",{className:`flex items-center ${r?"justify-center px-1":"gap-3 px-3"} py-2`,children:[e.jsx(ge,{className:`${r?"h-8 w-8":"h-10 w-10"} rounded-full`}),!r&&e.jsx(ge,{className:"h-4 flex-1"})]},M)):p.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:v}):e.jsxs(e.Fragment,{children:[p.map(f=>e.jsxs("button",{onClick:()=>t(f.id),className:`w-full flex items-center justify-between rounded-lg ${r?"px-1":"px-3"} py-2 text-left ${n===f.id?"bg-background border":"hover:bg-background/60"}`,children:[e.jsxs("div",{className:`flex items-center ${r?"justify-center":"gap-3"}`,children:[f.avatar?e.jsx("img",{src:f.avatar,alt:f.name,className:`${r?"h-8 w-8":"h-10 w-10"} rounded-full object-cover`}):e.jsx("div",{className:`${r?"h-8 w-8":"h-10 w-10"} rounded-full bg-primary text-white grid place-items-center font-semibold ${r?"text-xs":""}`,children:f.name.split(" ").map(M=>M[0]).slice(0,2).join("")}),!r&&e.jsx("div",{className:"text-sm",children:f.name})]}),f.unread?e.jsx("span",{className:"text-[10px] rounded bg-primary text-primary-foreground px-1.5 py-0.5",children:f.unread}):null]},f.id)),!r&&I.length>0?e.jsxs("div",{className:"pt-2",children:[e.jsx("div",{className:"px-2 py-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:"Natijalar"}),I.map(f=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg hover:bg-background/60",children:[e.jsx("div",{className:"text-sm",children:f.name}),o?e.jsx("button",{onClick:()=>o({name:f.name,type:f.type}),className:"text-xs rounded px-2 py-1 border hover:bg-background",children:"Chat boshlash"}):null]},`${f.type}:${f.name}`))]}):null]})})]})}function ve({title:a,status:n,messages:t,onBack:o,collapsed:i=!1}){const r=s.useRef(null),{user:d,addToBlocklist:x,removeFromBlocklist:L}=Z(),[v,u]=s.useState(!1),l=(d?.blocklist??[]).includes(a),k=()=>{d&&(l?L(a):x(a))};s.useEffect(()=>{r.current?.scrollTo({top:r.current.scrollHeight})},[t.length]),s.useEffect(()=>{if(!d)return;const g=`tt_ar_${d.email}_${a}`,p=localStorage.getItem(g);u(p==="1")},[d,a]);const w=()=>{if(!d)return;const g=`tt_ar_${d.email}_${a}`,p=!v;u(p),localStorage.setItem(g,p?"1":"0")};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b px-4 py-2 bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[e.jsxs("div",{className:"font-medium flex items-center gap-3",children:[o?e.jsx("button",{className:"md:hidden -ml-2 mr-1 inline-flex items-center justify-center rounded p-2 hover:bg-accent/40",onClick:o,"aria-label":"Orqaga",title:"Orqaga",children:e.jsx(Oa,{className:"h-4 w-4"})}):null,e.jsx("div",{children:a}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:w})," ","Auto-reply"]}),e.jsx("button",{onClick:k,disabled:!a,className:`text-xs rounded px-2 py-1 border ${l?"bg-destructive text-destructive-foreground border-destructive":"hover:bg-background"} ${a?"":"opacity-50 cursor-not-allowed"}`,title:l?"Mass xabardan chiqarish":"Mass xabardan bloklash",children:l?"Blokdan chiqarish":"Mass xabardan bloklash"})]})]}),e.jsx("div",{ref:r,className:"flex-1 overflow-auto p-3 space-y-2 bg-background",children:t.map(g=>e.jsxs("div",{className:`w-fit max-w-[80%] rounded-lg px-3 py-2 text-sm text-white ${g.sender==="me"?"ml-auto bg-primary":"bg-secondary"}`,children:[g.sender!=="me"?e.jsx("div",{className:"text-xs font-medium text-white mb-1",children:g.sender==="them"?a:g.sender}):null,g.text?e.jsx("div",{className:"mb-1 whitespace-pre-wrap",children:g.text}):null,g.file?g.file.type==="image"?e.jsx("img",{src:g.file.url,alt:g.file.name??"image",className:"max-w-full rounded-md mt-1"}):g.file.type==="audio"?e.jsx("audio",{controls:!0,src:g.file.url,className:"mt-1 w-full"}):g.file.type==="document"?e.jsxs("a",{href:g.file.url,download:g.file.name,className:"mt-1 inline-flex items-center gap-2 underline underline-offset-2",children:["ðŸ“Ž ",g.file.name??"Hujjat"]}):e.jsx("div",{className:"mt-1 rounded-md bg-background/60 border p-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Lokatsiya"}),g.file.name?e.jsx("div",{className:"text-xs text-muted-foreground",children:g.file.name}):null]}),e.jsx("a",{href:g.file.url,target:"_blank",rel:"noreferrer",className:"text-xs rounded px-2 py-1 border hover:bg-background",children:"Ko'rish"})]})}):null,e.jsx("div",{className:"text-[10px] text-white mt-1",children:new Date(g.at).toLocaleTimeString()})]},g.id))})]})}var ne="Popover",[Te,Ot]=oa(ne,[be]),ee=be(),[Va,B]=Te(ne),Oe=a=>{const{__scopePopover:n,children:t,open:o,defaultOpen:i,onOpenChange:r,modal:d=!1}=a,x=ee(n),L=s.useRef(null),[v,u]=s.useState(!1),[l,k]=ia({prop:o,defaultProp:i??!1,onChange:r,caller:ne});return e.jsx(ra,{...x,children:e.jsx(Va,{scope:n,contentId:la(),triggerRef:L,open:l,onOpenChange:k,onOpenToggle:s.useCallback(()=>k(w=>!w),[k]),hasCustomAnchor:v,onCustomAnchorAdd:s.useCallback(()=>u(!0),[]),onCustomAnchorRemove:s.useCallback(()=>u(!1),[]),modal:d,children:t})})};Oe.displayName=ne;var ze="PopoverAnchor",Xa=s.forwardRef((a,n)=>{const{__scopePopover:t,...o}=a,i=B(ze,t),r=ee(t),{onCustomAnchorAdd:d,onCustomAnchorRemove:x}=i;return s.useEffect(()=>(d(),()=>x()),[d,x]),e.jsx(je,{...r,...o,ref:n})});Xa.displayName=ze;var Fe="PopoverTrigger",qe=s.forwardRef((a,n)=>{const{__scopePopover:t,...o}=a,i=B(Fe,t),r=ee(t),d=Le(n,i.triggerRef),x=e.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ue(i.open),...o,ref:d,onClick:W(a.onClick,i.onOpenToggle)});return i.hasCustomAnchor?x:e.jsx(je,{asChild:!0,...r,children:x})});qe.displayName=Fe;var xe="PopoverPortal",[Wa,et]=Te(xe,{forceMount:void 0}),Ee=a=>{const{__scopePopover:n,forceMount:t,children:o,container:i}=a,r=B(xe,n);return e.jsx(Wa,{scope:n,forceMount:t,children:e.jsx(ye,{present:t||r.open,children:e.jsx(da,{asChild:!0,container:i,children:o})})})};Ee.displayName=xe;var Y="PopoverContent",Ge=s.forwardRef((a,n)=>{const t=et(Y,a.__scopePopover),{forceMount:o=t.forceMount,...i}=a,r=B(Y,a.__scopePopover);return e.jsx(ye,{present:o||r.open,children:r.modal?e.jsx(tt,{...i,ref:n}):e.jsx(nt,{...i,ref:n})})});Ge.displayName=Y;var at=ha("PopoverContent.RemoveScroll"),tt=s.forwardRef((a,n)=>{const t=B(Y,a.__scopePopover),o=s.useRef(null),i=Le(n,o),r=s.useRef(!1);return s.useEffect(()=>{const d=o.current;if(d)return ca(d)},[]),e.jsx(ma,{as:at,allowPinchZoom:!0,children:e.jsx(Be,{...a,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:W(a.onCloseAutoFocus,d=>{d.preventDefault(),r.current||t.triggerRef.current?.focus()}),onPointerDownOutside:W(a.onPointerDownOutside,d=>{const x=d.detail.originalEvent,L=x.button===0&&x.ctrlKey===!0,v=x.button===2||L;r.current=v},{checkForDefaultPrevented:!1}),onFocusOutside:W(a.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),nt=s.forwardRef((a,n)=>{const t=B(Y,a.__scopePopover),o=s.useRef(!1),i=s.useRef(!1);return e.jsx(Be,{...a,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{a.onCloseAutoFocus?.(r),r.defaultPrevented||(o.current||t.triggerRef.current?.focus(),r.preventDefault()),o.current=!1,i.current=!1},onInteractOutside:r=>{a.onInteractOutside?.(r),r.defaultPrevented||(o.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const d=r.target;t.triggerRef.current?.contains(d)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),Be=s.forwardRef((a,n)=>{const{__scopePopover:t,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:r,disableOutsidePointerEvents:d,onEscapeKeyDown:x,onPointerDownOutside:L,onFocusOutside:v,onInteractOutside:u,...l}=a,k=B(Y,t),w=ee(t);return xa(),e.jsx(ua,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:r,children:e.jsx(pa,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:u,onEscapeKeyDown:x,onPointerDownOutside:L,onFocusOutside:v,onDismiss:()=>k.onOpenChange(!1),children:e.jsx(ga,{"data-state":Ue(k.open),role:"dialog",id:k.contentId,...w,...l,ref:n,style:{...l.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$e="PopoverClose",st=s.forwardRef((a,n)=>{const{__scopePopover:t,...o}=a,i=B($e,t);return e.jsx(le.button,{type:"button",...o,ref:n,onClick:W(a.onClick,()=>i.onOpenChange(!1))})});st.displayName=$e;var it="PopoverArrow",rt=s.forwardRef((a,n)=>{const{__scopePopover:t,...o}=a,i=ee(t);return e.jsx(fa,{...i,...o,ref:n})});rt.displayName=it;function Ue(a){return a?"open":"closed"}var ot=Oe,lt=qe,dt=Ee,Ke=Ge;const ct=ot,mt=lt,Je=s.forwardRef(({className:a,align:n="center",sideOffset:t=4,...o},i)=>e.jsx(dt,{children:e.jsx(Ke,{ref:i,align:n,sideOffset:t,className:D("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})}));Je.displayName=Ke.displayName;function ke({onSend:a}){const[n,t]=s.useState(""),[o,i]=s.useState(""),[r,d]=s.useState(null),[x,L]=s.useState(null),v=["Salom! Sizga qanday yordam bera olaman?","Rahmat! Tez orada aloqaga chiqamiz.","Bugungi taklif: chegirma 20% faqat bugun!"],u=s.useRef(null),l=s.useRef(null),k=s.useRef(null),[w,g]=s.useState(!1),p=s.useRef(null),A=s.useRef(!1),I=s.useRef(!1),f=()=>{t(""),d(null),L(null),i(""),u.current&&(u.current.value=""),l.current&&(l.current.value=""),k.current&&(k.current.value="")},M=()=>{const c=!!n.trim(),j=!!r&&!!x;if(!c&&!j)return;const F=(o?new Date(o).getTime():0)-Date.now(),q=()=>{j&&r&&x&&a({attachment:{type:x,file:r}}),c&&a({text:n.trim()})};if(o&&F>0){window.setTimeout(q,F),f();return}q(),f()},z=()=>{L("image"),u.current?.click()},$=()=>{L("audio"),l.current?.click()},K=()=>{L("document"),k.current?.click()},U=()=>{if(!navigator.geolocation){a({text:"Lokatsiyani ulash uchun geolokatsiya qo'llab-quvvatlanmaydi"});return}navigator.geolocation.getCurrentPosition(c=>{const{latitude:j,longitude:P}=c.coords,F=`https://maps.google.com/?q=${j},${P}`;a({attachment:{type:"location",url:F,name:`${j.toFixed(5)}, ${P.toFixed(5)}`}})},()=>{a({text:"Lokatsiyani ulashga ruxsat berilmadi"})},{enableHighAccuracy:!0,timeout:1e4})},O=c=>{const j=c.target.files?.[0]??null;j&&d(j)},m=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),M())},b=c=>{c.preventDefault(),A.current=!1,I.current=!1,p.current&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>{A.current=!0,I.current=!0,g(!0)},550)},y=c=>{c.preventDefault(),p.current&&window.clearTimeout(p.current),A.current||M(),A.current=!1};return e.jsxs("div",{className:"border-t bg-background/80 supports-[backdrop-filter]:bg-background/60 backdrop-blur p-3 sticky bottom-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:u,onChange:O,type:"file",accept:"image/*,video/*",className:"hidden"}),e.jsx("input",{ref:l,onChange:O,type:"file",accept:"audio/*",className:"hidden"}),e.jsx("input",{ref:k,onChange:O,type:"file",accept:"*/*",className:"hidden"}),e.jsxs(de,{children:[e.jsx(ce,{asChild:!0,children:e.jsx(S,{type:"button",variant:"secondary",size:"icon",title:"Qo'shish","aria-label":"Qo'shish",className:"shrink-0",children:e.jsx(Ja,{className:"h-4 w-4"})})}),e.jsxs(me,{align:"start",className:"w-56",children:[e.jsx(_,{onClick:z,children:"Surat/Video tanlash"}),e.jsx(_,{onClick:$,children:"Audio tanlash"}),e.jsx(_,{onClick:K,children:"Hujjat tanlash"}),e.jsx(oe,{}),e.jsx(_,{onClick:U,children:"Lokatsiya ulash"}),e.jsx(oe,{}),e.jsxs(Ma,{children:[e.jsx(Pa,{children:"Shablonlar"}),e.jsx(Aa,{children:v.map(c=>e.jsx(_,{onClick:()=>t(c),children:c},c))})]})]})]}),e.jsx(H,{className:"flex-1",value:n,onChange:c=>t(c.target.value),onKeyDown:m,placeholder:"Xabar yozing..."}),e.jsx(S,{type:"button",variant:"secondary",size:"icon",onClick:$,title:"Audio","aria-label":"Audio",className:"shrink-0",children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsxs(ct,{open:w,onOpenChange:c=>{c?I.current&&g(!0):(g(!1),I.current=!1)},children:[e.jsx(mt,{asChild:!0,children:e.jsx(S,{type:"button",size:"icon",title:"Yuborish","aria-label":"Yuborish",className:"shrink-0",onPointerDown:b,onPointerUp:y,onPointerLeave:()=>{p.current&&window.clearTimeout(p.current),A.current=!1,I.current=!1},children:e.jsx(Za,{className:"h-4 w-4 text-white"})})}),e.jsx(Je,{align:"end",className:"w-64",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Yuborish vaqtini tanlang"}),e.jsx(Fa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(H,{type:"datetime-local",value:o,onChange:c=>i(c.target.value)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>i(""),className:"text-xs rounded px-2 py-1 border hover:bg-background",children:"Tozalash"}),e.jsx("span",{className:"text-[11px] text-muted-foreground",children:o?new Date(o).toLocaleString():"Darhol"})]})]})})]})]}),o?e.jsxs("div",{className:"mt-2 text-[11px] inline-flex items-center gap-2 rounded border px-2 py-1",children:["Rejalashtirilgan: ",new Date(o).toLocaleString(),e.jsx("button",{onClick:()=>i(""),className:"rounded p-0.5 hover:bg-accent/40","aria-label":"Rejani o'chirish",title:"Rejani o'chirish",children:e.jsx(te,{className:"h-3 w-3"})})]}):null,r?e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"truncate",children:r.name}),e.jsx("span",{className:"rounded border px-1.5 py-0.5 text-[10px]",children:x}),e.jsxs("button",{onClick:()=>{d(null),L(null),u.current&&(u.current.value=""),l.current&&(l.current.value=""),k.current&&(k.current.value="")},className:"ml-auto inline-flex items-center gap-1 rounded px-1.5 py-0.5 text-[10px] hover:bg-accent/40","aria-label":"Faylni o'chirish",title:"Faylni o'chirish",children:[e.jsx(te,{className:"h-3 w-3"})," O'chirish"]})]}):null,e.jsx("div",{className:"pt-[env(safe-area-inset-bottom)]"})]})}function ht({open:a,onClose:n,onSend:t}){const[o,i]=s.useState("");return a?e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",children:e.jsxs("div",{className:"w-full max-w-lg rounded-xl border bg-background p-5 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Mass xabar yuborish"}),e.jsx("textarea",{value:o,onChange:r=>i(r.target.value),className:"w-full min-h-[120px] rounded-md bg-secondary p-3",placeholder:"Xabar matni..."}),e.jsxs("div",{className:"mt-3 flex items-center justify-end gap-2",children:[e.jsx(S,{variant:"outline",onClick:n,children:"Bekor qilish"}),e.jsx(S,{onClick:()=>{o.trim()&&(t(o.trim()),i(""),n())},children:"Yuborish"})]})]})}):null}var xt="Label",Qe=s.forwardRef((a,n)=>e.jsx(le.label,{...a,ref:n,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(a.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Qe.displayName=xt;var He=Qe;const ut=Ra("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=s.forwardRef(({className:a,...n},t)=>e.jsx(He,{ref:t,className:D(ut(),a),...n}));X.displayName=He.displayName;const pt=va,gt=ka,Ye=s.forwardRef(({className:a,...n},t)=>e.jsx(Ce,{ref:t,className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n}));Ye.displayName=Ce.displayName;const Ze=s.forwardRef(({className:a,children:n,...t},o)=>e.jsxs(gt,{children:[e.jsx(Ye,{}),e.jsxs(we,{ref:o,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t,children:[n,e.jsxs(ba,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ze.displayName=we.displayName;const Ve=({className:a,...n})=>e.jsx("div",{className:D("flex flex-col space-y-1.5 text-center sm:text-left",a),...n});Ve.displayName="DialogHeader";const Xe=({className:a,...n})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...n});Xe.displayName="DialogFooter";const We=s.forwardRef(({className:a,...n},t)=>e.jsx(Ne,{ref:t,className:D("text-lg font-semibold leading-none tracking-tight",a),...n}));We.displayName=Ne.displayName;const ft=s.forwardRef(({className:a,...n},t)=>e.jsx(Se,{ref:t,className:D("text-sm text-muted-foreground",a),...n}));ft.displayName=Se.displayName;const vt=La,kt=ja,ea=s.forwardRef(({className:a,children:n,...t},o)=>e.jsxs(De,{ref:o,className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[n,e.jsx(ya,{asChild:!0,children:e.jsx(he,{className:"h-4 w-4 opacity-50"})})]}));ea.displayName=De.displayName;const aa=s.forwardRef(({className:a,...n},t)=>e.jsx(Pe,{ref:t,className:D("flex cursor-default items-center justify-center py-1",a),...n,children:e.jsx(Ea,{className:"h-4 w-4"})}));aa.displayName=Pe.displayName;const ta=s.forwardRef(({className:a,...n},t)=>e.jsx(Ae,{ref:t,className:D("flex cursor-default items-center justify-center py-1",a),...n,children:e.jsx(he,{className:"h-4 w-4"})}));ta.displayName=Ae.displayName;const na=s.forwardRef(({className:a,children:n,position:t="popper",...o},i)=>e.jsx(wa,{children:e.jsxs(Ie,{ref:i,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...o,children:[e.jsx(aa,{}),e.jsx(Na,{className:D("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(ta,{})]})}));na.displayName=Ie.displayName;const bt=s.forwardRef(({className:a,...n},t)=>e.jsx(Re,{ref:t,className:D("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n}));bt.displayName=Re.displayName;const sa=s.forwardRef(({className:a,children:n,...t},o)=>e.jsxs(Me,{ref:o,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ca,{children:e.jsx(_a,{className:"h-4 w-4"})})}),e.jsx(Sa,{children:n})]}));sa.displayName=Me.displayName;const Lt=s.forwardRef(({className:a,...n},t)=>e.jsx(_e,{ref:t,className:D("-mx-1 my-1 h-px bg-muted",a),...n}));Lt.displayName=_e.displayName;const ae=[{code:"UZ",name:"O'zbekiston",prefix:"+998",mask:"+998 99 999 99 99",minLength:9,maxLength:9},{code:"RU",name:"Rossiya",prefix:"+7",mask:"+7 999 999 99 99",minLength:10,maxLength:10},{code:"KZ",name:"Qozog'iston",prefix:"+7",mask:"+7 999 999 99 99",minLength:10,maxLength:10},{code:"KG",name:"Qirg'iziston",prefix:"+996",mask:"+996 999 999 999",minLength:9,maxLength:9},{code:"TJ",name:"Tojikiston",prefix:"+992",mask:"+992 99 999 9999",minLength:9,maxLength:9},{code:"TM",name:"Turkmaniston",prefix:"+993",mask:"+993 9 999 9999",minLength:8,maxLength:8},{code:"US",name:"United States",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"GB",name:"United Kingdom",prefix:"+44",mask:"+44 9999 999999",minLength:10,maxLength:10},{code:"DE",name:"Germany",prefix:"+49",mask:"+49 999 9999999",minLength:10,maxLength:11},{code:"FR",name:"France",prefix:"+33",mask:"+33 9 99 99 99 99",minLength:9,maxLength:9},{code:"IT",name:"Italy",prefix:"+39",mask:"+39 999 999 9999",minLength:10,maxLength:10},{code:"ES",name:"Spain",prefix:"+34",mask:"+34 999 999 999",minLength:9,maxLength:9},{code:"CN",name:"China",prefix:"+86",mask:"+86 999 9999 9999",minLength:11,maxLength:11},{code:"JP",name:"Japan",prefix:"+81",mask:"+81 99 9999 9999",minLength:10,maxLength:10},{code:"IN",name:"India",prefix:"+91",mask:"+91 99999 99999",minLength:10,maxLength:10},{code:"BR",name:"Brazil",prefix:"+55",mask:"+55 99 99999 9999",minLength:11,maxLength:11},{code:"MX",name:"Mexico",prefix:"+52",mask:"+52 999 999 9999",minLength:10,maxLength:10},{code:"CA",name:"Canada",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"AU",name:"Australia",prefix:"+61",mask:"+61 999 999 999",minLength:9,maxLength:9},{code:"KR",name:"South Korea",prefix:"+82",mask:"+82 99 9999 9999",minLength:10,maxLength:11},{code:"TR",name:"Turkey",prefix:"+90",mask:"+90 999 999 99 99",minLength:10,maxLength:10},{code:"SA",name:"Saudi Arabia",prefix:"+966",mask:"+966 99 999 9999",minLength:9,maxLength:9},{code:"AE",name:"United Arab Emirates",prefix:"+971",mask:"+971 99 999 9999",minLength:9,maxLength:9},{code:"EG",name:"Egypt",prefix:"+20",mask:"+20 999 999 9999",minLength:10,maxLength:10},{code:"ZA",name:"South Africa",prefix:"+27",mask:"+27 99 999 9999",minLength:9,maxLength:9},{code:"NG",name:"Nigeria",prefix:"+234",mask:"+234 999 999 9999",minLength:10,maxLength:11},{code:"KE",name:"Kenya",prefix:"+254",mask:"+254 999 999999",minLength:9,maxLength:9},{code:"GH",name:"Ghana",prefix:"+233",mask:"+233 99 999 9999",minLength:9,maxLength:9},{code:"TZ",name:"Tanzania",prefix:"+255",mask:"+255 999 999 999",minLength:9,maxLength:9},{code:"UG",name:"Uganda",prefix:"+256",mask:"+256 999 999999",minLength:9,maxLength:9},{code:"RW",name:"Rwanda",prefix:"+250",mask:"+250 999 999 999",minLength:9,maxLength:9},{code:"BI",name:"Burundi",prefix:"+257",mask:"+257 99 99 99 99",minLength:8,maxLength:8},{code:"ZM",name:"Zambia",prefix:"+260",mask:"+260 99 9999999",minLength:9,maxLength:9},{code:"ZW",name:"Zimbabwe",prefix:"+263",mask:"+263 99 999 9999",minLength:9,maxLength:9},{code:"MZ",name:"Mozambique",prefix:"+258",mask:"+258 99 999 9999",minLength:9,maxLength:9},{code:"BW",name:"Botswana",prefix:"+267",mask:"+267 99 999 999",minLength:8,maxLength:8},{code:"LS",name:"Lesotho",prefix:"+266",mask:"+266 9 999 9999",minLength:8,maxLength:8},{code:"SZ",name:"Eswatini",prefix:"+268",mask:"+268 99 99 99 99",minLength:8,maxLength:8},{code:"NA",name:"Namibia",prefix:"+264",mask:"+264 99 999 9999",minLength:9,maxLength:9},{code:"AO",name:"Angola",prefix:"+244",mask:"+244 999 999 999",minLength:9,maxLength:9},{code:"CV",name:"Cape Verde",prefix:"+238",mask:"+238 999 99 99",minLength:7,maxLength:7},{code:"GQ",name:"Equatorial Guinea",prefix:"+240",mask:"+240 999 999 999",minLength:9,maxLength:9},{code:"GA",name:"Gabon",prefix:"+241",mask:"+241 9 99 99 99",minLength:7,maxLength:8},{code:"CM",name:"Cameroon",prefix:"+237",mask:"+237 9999 9999",minLength:8,maxLength:8},{code:"TD",name:"Chad",prefix:"+235",mask:"+235 99 99 99 99",minLength:8,maxLength:8},{code:"CF",name:"Central African Republic",prefix:"+236",mask:"+236 99 99 99 99",minLength:8,maxLength:8},{code:"CG",name:"Republic of the Congo",prefix:"+242",mask:"+242 99 999 9999",minLength:9,maxLength:9},{code:"CD",name:"Democratic Republic of the Congo",prefix:"+243",mask:"+243 999 999 999",minLength:9,maxLength:9},{code:"DJ",name:"Djibouti",prefix:"+253",mask:"+253 99 99 99 99",minLength:8,maxLength:8},{code:"ER",name:"Eritrea",prefix:"+291",mask:"+291 9 999 999",minLength:7,maxLength:7},{code:"ET",name:"Ethiopia",prefix:"+251",mask:"+251 99 999 9999",minLength:9,maxLength:9},{code:"SO",name:"Somalia",prefix:"+252",mask:"+252 99 999 9999",minLength:9,maxLength:9},{code:"SS",name:"South Sudan",prefix:"+211",mask:"+211 99 999 9999",minLength:9,maxLength:9},{code:"SD",name:"Sudan",prefix:"+249",mask:"+249 99 999 9999",minLength:9,maxLength:9},{code:"MA",name:"Morocco",prefix:"+212",mask:"+212 999 999999",minLength:9,maxLength:9},{code:"TN",name:"Tunisia",prefix:"+216",mask:"+216 99 999 999",minLength:8,maxLength:8},{code:"LY",name:"Libya",prefix:"+218",mask:"+218 99 999 9999",minLength:9,maxLength:10},{code:"DZ",name:"Algeria",prefix:"+213",mask:"+213 999 999 999",minLength:9,maxLength:9},{code:"MR",name:"Mauritania",prefix:"+222",mask:"+222 99 99 99 99",minLength:8,maxLength:8},{code:"ML",name:"Mali",prefix:"+223",mask:"+223 99 99 99 99",minLength:8,maxLength:8},{code:"SN",name:"Senegal",prefix:"+221",mask:"+221 99 999 9999",minLength:9,maxLength:9},{code:"GM",name:"Gambia",prefix:"+220",mask:"+220 999 9999",minLength:7,maxLength:7},{code:"GN",name:"Guinea",prefix:"+224",mask:"+224 999 999 999",minLength:9,maxLength:9},{code:"SL",name:"Sierra Leone",prefix:"+232",mask:"+232 99 999999",minLength:8,maxLength:8},{code:"LR",name:"Liberia",prefix:"+231",mask:"+231 99 999 9999",minLength:9,maxLength:10},{code:"CI",name:"Ivory Coast",prefix:"+225",mask:"+225 99 999 999",minLength:8,maxLength:8},{code:"BF",name:"Burkina Faso",prefix:"+226",mask:"+226 99 99 99 99",minLength:8,maxLength:8},{code:"TG",name:"Togo",prefix:"+228",mask:"+228 99 99 99 99",minLength:8,maxLength:8},{code:"BJ",name:"Benin",prefix:"+229",mask:"+229 99 99 99 99",minLength:8,maxLength:8},{code:"NE",name:"Niger",prefix:"+227",mask:"+227 99 99 99 99",minLength:8,maxLength:8},{code:"HT",name:"Haiti",prefix:"+509",mask:"+509 99 99 9999",minLength:8,maxLength:8},{code:"DO",name:"Dominican Republic",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"CU",name:"Cuba",prefix:"+53",mask:"+53 9 999 9999",minLength:8,maxLength:8},{code:"JM",name:"Jamaica",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"TT",name:"Trinidad and Tobago",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"BB",name:"Barbados",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"BS",name:"Bahamas",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"AG",name:"Antigua and Barbuda",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"VC",name:"Saint Vincent and the Grenadines",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"GD",name:"Grenada",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"DM",name:"Dominica",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"KN",name:"Saint Kitts and Nevis",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"LC",name:"Saint Lucia",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"MS",name:"Montserrat",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"TC",name:"Turks and Caicos Islands",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"VG",name:"British Virgin Islands",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"VI",name:"U.S. Virgin Islands",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"PR",name:"Puerto Rico",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"AS",name:"American Samoa",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"GU",name:"Guam",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"MP",name:"Northern Mariana Islands",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"KY",name:"Cayman Islands",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"BM",name:"Bermuda",prefix:"+1",mask:"+1 999 999 9999",minLength:10,maxLength:10},{code:"FK",name:"Falkland Islands",prefix:"+500",mask:"+500 99999",minLength:5,maxLength:5},{code:"GS",name:"South Georgia and the South Sandwich Islands",prefix:"+500",mask:"+500 99999",minLength:5,maxLength:5},{code:"SH",name:"Saint Helena",prefix:"+290",mask:"+290 9999",minLength:4,maxLength:4},{code:"TA",name:"Tristan da Cunha",prefix:"+290",mask:"+290 9999",minLength:4,maxLength:4},{code:"AC",name:"Ascension Island",prefix:"+247",mask:"+247 9999",minLength:4,maxLength:4},{code:"IO",name:"British Indian Ocean Territory",prefix:"+246",mask:"+246 999 9999",minLength:7,maxLength:7},{code:"CX",name:"Christmas Island",prefix:"+61",mask:"+61 999 999 999",minLength:9,maxLength:9},{code:"CC",name:"Cocos (Keeling) Islands",prefix:"+61",mask:"+61 999 999 999",minLength:9,maxLength:9},{code:"NF",name:"Norfolk Island",prefix:"+672",mask:"+672 9 99999",minLength:6,maxLength:6},{code:"HM",name:"Heard Island and McDonald Islands",prefix:"+672",mask:"+672 9 99999",minLength:6,maxLength:6},{code:"AQ",name:"Antarctica",prefix:"+672",mask:"+672 9 99999",minLength:6,maxLength:6},{code:"BV",name:"Bouvet Island",prefix:"+47",mask:"+47 999 99 999",minLength:8,maxLength:8},{code:"SJ",name:"Svalbard and Jan Mayen",prefix:"+47",mask:"+47 999 99 999",minLength:8,maxLength:8},{code:"TF",name:"French Southern Territories",prefix:"+262",mask:"+262 999 99 99 99",minLength:9,maxLength:9},{code:"PF",name:"French Polynesia",prefix:"+689",mask:"+689 99 99 99 99",minLength:8,maxLength:8},{code:"NC",name:"New Caledonia",prefix:"+687",mask:"+687 99 99 99",minLength:6,maxLength:6},{code:"WF",name:"Wallis and Futuna",prefix:"+681",mask:"+681 99 99 99",minLength:6,maxLength:6},{code:"YT",name:"Mayotte",prefix:"+262",mask:"+262 999 99 99 99",minLength:9,maxLength:9},{code:"RE",name:"RÃ©union",prefix:"+262",mask:"+262 999 99 99 99",minLength:9,maxLength:9},{code:"PM",name:"Saint Pierre and Miquelon",prefix:"+508",mask:"+508 99 99 99",minLength:6,maxLength:6},{code:"BL",name:"Saint BarthÃ©lemy",prefix:"+590",mask:"+590 999 99 99 99",minLength:9,maxLength:9},{code:"MF",name:"Saint Martin",prefix:"+590",mask:"+590 999 99 99 99",minLength:9,maxLength:9},{code:"GP",name:"Guadeloupe",prefix:"+590",mask:"+590 999 99 99 99",minLength:9,maxLength:9},{code:"MQ",name:"Martinique",prefix:"+596",mask:"+596 999 99 99 99",minLength:9,maxLength:9},{code:"GF",name:"French Guiana",prefix:"+594",mask:"+594 999 99 99 99",minLength:9,maxLength:9},{code:"AX",name:"Ã…land Islands",prefix:"+358",mask:"+358 999 999999",minLength:9,maxLength:11},{code:"FI",name:"Finland",prefix:"+358",mask:"+358 999 999999",minLength:9,maxLength:11},{code:"EE",name:"Estonia",prefix:"+372",mask:"+372 9999 9999",minLength:8,maxLength:8},{code:"LV",name:"Latvia",prefix:"+371",mask:"+371 99 999 999",minLength:8,maxLength:8},{code:"LT",name:"Lithuania",prefix:"+370",mask:"+370 999 99 999",minLength:8,maxLength:8},{code:"BY",name:"Belarus",prefix:"+375",mask:"+375 99 999 99 99",minLength:9,maxLength:9},{code:"UA",name:"Ukraine",prefix:"+380",mask:"+380 99 999 99 99",minLength:9,maxLength:9},{code:"MD",name:"Moldova",prefix:"+373",mask:"+373 999 99 999",minLength:8,maxLength:8},{code:"RO",name:"Romania",prefix:"+40",mask:"+40 999 999 999",minLength:9,maxLength:10},{code:"BG",name:"Bulgaria",prefix:"+359",mask:"+359 999 999 999",minLength:9,maxLength:9},{code:"GR",name:"Greece",prefix:"+30",mask:"+30 999 999 9999",minLength:10,maxLength:10},{code:"CY",name:"Cyprus",prefix:"+357",mask:"+357 99 999999",minLength:8,maxLength:8},{code:"MT",name:"Malta",prefix:"+356",mask:"+356 9999 9999",minLength:8,maxLength:8},{code:"SI",name:"Slovenia",prefix:"+386",mask:"+386 99 999 999",minLength:8,maxLength:9},{code:"HR",name:"Croatia",prefix:"+385",mask:"+385 99 999 9999",minLength:9,maxLength:9},{code:"BA",name:"Bosnia and Herzegovina",prefix:"+387",mask:"+387 99 999 999",minLength:8,maxLength:9},{code:"ME",name:"Montenegro",prefix:"+382",mask:"+382 99 999 999",minLength:8,maxLength:9},{code:"RS",name:"Serbia",prefix:"+381",mask:"+381 99 999 9999",minLength:9,maxLength:10},{code:"MK",name:"North Macedonia",prefix:"+389",mask:"+389 99 999 999",minLength:8,maxLength:8},{code:"AL",name:"Albania",prefix:"+355",mask:"+355 99 999 9999",minLength:9,maxLength:9},{code:"XK",name:"Kosovo",prefix:"+383",mask:"+383 99 999 999",minLength:8,maxLength:9},{code:"PT",name:"Portugal",prefix:"+351",mask:"+351 999 999 999",minLength:9,maxLength:9},{code:"AD",name:"Andorra",prefix:"+376",mask:"+376 999 999",minLength:6,maxLength:6},{code:"MC",name:"Monaco",prefix:"+377",mask:"+377 99 99 99 99",minLength:8,maxLength:8},{code:"SM",name:"San Marino",prefix:"+378",mask:"+378 9999 999999",minLength:10,maxLength:10},{code:"VA",name:"Vatican City",prefix:"+379",mask:"+379 999 999999",minLength:9,maxLength:9},{code:"LI",name:"Liechtenstein",prefix:"+423",mask:"+423 999 999 999",minLength:9,maxLength:9},{code:"CH",name:"Switzerland",prefix:"+41",mask:"+41 99 999 99 99",minLength:9,maxLength:9},{code:"AT",name:"Austria",prefix:"+43",mask:"+43 999 9999999",minLength:10,maxLength:13},{code:"SK",name:"Slovakia",prefix:"+421",mask:"+421 999 999 999",minLength:9,maxLength:9},{code:"CZ",name:"Czech Republic",prefix:"+420",mask:"+420 999 999 999",minLength:9,maxLength:9},{code:"PL",name:"Poland",prefix:"+48",mask:"+48 999 999 999",minLength:9,maxLength:9},{code:"HU",name:"Hungary",prefix:"+36",mask:"+36 99 999 9999",minLength:9,maxLength:9},{code:"NO",name:"Norway",prefix:"+47",mask:"+47 999 99 999",minLength:8,maxLength:8},{code:"SE",name:"Sweden",prefix:"+46",mask:"+46 99 999 9999",minLength:9,maxLength:10},{code:"DK",name:"Denmark",prefix:"+45",mask:"+45 99 99 99 99",minLength:8,maxLength:8},{code:"IS",name:"Iceland",prefix:"+354",mask:"+354 999 9999",minLength:7,maxLength:7},{code:"IE",name:"Ireland",prefix:"+353",mask:"+353 99 999 9999",minLength:9,maxLength:9},{code:"NL",name:"Netherlands",prefix:"+31",mask:"+31 99 9999999",minLength:9,maxLength:10},{code:"BE",name:"Belgium",prefix:"+32",mask:"+32 999 99 99 99",minLength:8,maxLength:9},{code:"LU",name:"Luxembourg",prefix:"+352",mask:"+352 999 999 999",minLength:9,maxLength:9},{code:"GI",name:"Gibraltar",prefix:"+350",mask:"+350 99999",minLength:5,maxLength:5},{code:"FO",name:"Faroe Islands",prefix:"+298",mask:"+298 999999",minLength:6,maxLength:6},{code:"GL",name:"Greenland",prefix:"+299",mask:"+299 99 99 99",minLength:6,maxLength:6},{code:"IM",name:"Isle of Man",prefix:"+44",mask:"+44 9999 999999",minLength:10,maxLength:10},{code:"JE",name:"Jersey",prefix:"+44",mask:"+44 9999 999999",minLength:10,maxLength:10},{code:"GG",name:"Guernsey",prefix:"+44",mask:"+44 9999 999999",minLength:10,maxLength:10}],ie="http://localhost:8002";function jt({open:a,onClose:n,onSuccess:t}){const{user:o}=Z(),[i,r]=s.useState("phone"),[d,x]=s.useState(!1),L=ae.find(m=>m.code==="UZ")||null,[v,u]=s.useState(L),[l,k]=s.useState(L?.prefix||""),[w,g]=s.useState(""),[p,A]=s.useState(""),[I,f]=s.useState(null),M=async()=>{if(i==="phone"&&l.trim()){x(!0);try{const{data:{session:m}}=await se(async()=>{const{createClient:c}=await import("./index-CeTBpfkd.js").then(j=>j.q);return{createClient:c}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({createClient:c})=>c("https://kqgjxxnnhcdcvpkkpvwi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtxZ2p4eG5uaGNkY3Zwa2twdndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2NTg1NDIsImV4cCI6MjA3MzIzNDU0Mn0.tvOmGyKN4bKncK_xrUxUZwseDDRrQH0RMrGvb581h8M").auth.getSession());if(!m?.access_token){console.error("No access token available"),x(!1);return}const y=await(await fetch(`${ie}/start_login`,{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:l.replace(/\s/g,"")})})).json();y.ok?(f(y),r("verify")):console.error("Login failed:",y.message)}catch(m){console.error("API call failed:",m)}finally{x(!1)}}else if(i==="verify"&&w.trim()&&I){x(!0);try{const{data:{session:m}}=await se(async()=>{const{createClient:c}=await import("./index-CeTBpfkd.js").then(j=>j.q);return{createClient:c}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({createClient:c})=>c("https://kqgjxxnnhcdcvpkkpvwi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtxZ2p4eG5uaGNkY3Zwa2twdndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2NTg1NDIsImV4cCI6MjA3MzIzNDU0Mn0.tvOmGyKN4bKncK_xrUxUZwseDDRrQH0RMrGvb581h8M").auth.getSession());if(!m?.access_token){console.error("No access token available"),x(!1);return}const y=await(await fetch(`${ie}/verify_code`,{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:l.replace(/\s/g,""),code:w.trim()})})).json();y.ok&&y.status==="LOGGED_IN"?(t({...y,phone:l.replace(/\s/g,""),country:v}),z()):y.status==="PASSWORD_REQUIRED"?(f(y),r("password")):console.error("Verification failed:",y.message)}catch(m){console.error("Verification API call failed:",m)}finally{x(!1)}}else if(i==="password"&&p.trim()&&I){x(!0);try{const{data:{session:m}}=await se(async()=>{const{createClient:c}=await import("./index-CeTBpfkd.js").then(j=>j.q);return{createClient:c}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({createClient:c})=>c("https://kqgjxxnnhcdcvpkkpvwi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtxZ2p4eG5uaGNkY3Zwa2twdndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2NTg1NDIsImV4cCI6MjA3MzIzNDU0Mn0.tvOmGyKN4bKncK_xrUxUZwseDDRrQH0RMrGvb581h8M").auth.getSession());if(!m?.access_token){console.error("No access token available"),x(!1);return}const y=await(await fetch(`${ie}/verify_password`,{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({phone_number:l.replace(/\s/g,""),password:p.trim()})})).json();y.ok&&y.status==="LOGGED_IN"?(t({...y,phone:l.replace(/\s/g,""),country:v}),z()):console.error("Password verification failed:",y.message)}catch(m){console.error("Password verification API call failed:",m)}finally{x(!1)}}},z=()=>{r("phone"),u(L),k(L?.prefix||""),g(""),A(""),f(null),x(!1),n()},$=()=>{r("phone"),g("")},K=m=>{const b=ae.find(y=>y.code===m);if(u(b||null),b)if(!l||l==="+")k(b.prefix);else{const y=U(l,b);k(y)}},U=(m,b)=>{if(!b)return m;const y=m.replace(/\D/g,""),c=b.prefix.replace("+","");if(!y.startsWith(c))return m;const j=y.slice(c.length),P=b.mask,F=P.indexOf(b.prefix)+b.prefix.length,q=P.slice(F);let J=b.prefix,V=0;for(let Q=0;Q<q.length&&V<j.length;Q++){const h=q[Q];h==="9"?(J+=j[V],V++):J+=h}return J},O=m=>{let b=null;m.startsWith("+")&&(b=ae.find(c=>m.startsWith(c.prefix))),b&&b!==v?u(b):!b&&v&&!m.startsWith(v.prefix)&&u(null);const y=b||v;if(y){const c=U(m,y);k(c)}else k(m)};return e.jsx(pt,{open:a,onOpenChange:z,children:e.jsxs(Ze,{className:"sm:max-w-[425px]",children:[e.jsx(Ve,{children:e.jsx(We,{children:i==="phone"?"Hisob qo'shish":i==="verify"?"Kodni tasdiqlash":"Parolni kiriting"})}),e.jsx("div",{className:"grid gap-4 py-4",children:i==="phone"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{htmlFor:"country",children:"Davlatni tanlang"}),e.jsxs(vt,{value:v?.code||"",onValueChange:K,children:[e.jsx(ea,{children:e.jsx(kt,{placeholder:"Davlatni tanlang"})}),e.jsx(na,{children:ae.map(m=>e.jsxs(sa,{value:m.code,children:[m.name," (",m.prefix,")"]},m.code))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{htmlFor:"phone",children:"Telefon raqami"}),e.jsx(H,{id:"phone",type:"tel",placeholder:"+998 00 000 00 00",value:l,onChange:m=>O(m.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Telefon raqamingizni kiriting"})]})]}):i==="verify"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{htmlFor:"code",children:"Tasdiqlash kodi"}),e.jsx(H,{id:"code",type:"text",placeholder:"12345",value:w,onChange:m=>g(m.target.value),maxLength:6}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l," raqamiga yuborilgan kodni kiriting"]})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{htmlFor:"password",children:"Parol"}),e.jsx(H,{id:"password",type:"password",placeholder:"Parolingizni kiriting",value:p,onChange:m=>A(m.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ikkinchi bosqichli parolni kiriting"})]})})}),e.jsxs(Xe,{children:[e.jsx(S,{variant:"outline",onClick:i==="phone"?z:$,children:i==="phone"?"Bekor qilish":"Orqaga"}),e.jsx(S,{onClick:M,disabled:i==="phone"&&!l.trim()||i==="verify"&&!w.trim()||i==="password"&&!p.trim()||d,className:"text-white",children:d?"Yuborilmoqda...":i==="phone"?"Davam etish":i==="verify"?"Tasdiqlash":"Kirish"})]})]})})}function yt({open:a,onClose:n}){const{user:t,switchTelegramAccount:o}=Z();return!a||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border bg-background p-5 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Telegram hisoblari"}),e.jsx("div",{className:"space-y-2",children:t.telegramAccounts.length===0?e.jsx("div",{className:"text-sm text-muted-foreground",children:"Hisob topilmadi."}):t.telegramAccounts.map(i=>e.jsxs("div",{className:"flex items-center justify-between border rounded p-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.profile_picture?e.jsx("img",{src:i.profile_picture,alt:i.name,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary text-white grid place-items-center font-semibold",children:i.name.split(" ").map(r=>r[0]).slice(0,2).join("")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:i.phone})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>o(i.id),className:"px-2 py-1 rounded bg-secondary text-sm",children:"Faollashtirish"})})]},i.id))}),e.jsx("div",{className:"mt-4 flex justify-end gap-2",children:e.jsx(S,{variant:"outline",onClick:n,children:"Yopish"})})]})})}function wt({open:a,onClose:n}){const{user:t,updateUser:o}=Z(),[i,r]=s.useState([]),[d,x]=s.useState("");s.useEffect(()=>{if(!t)return;const v=`tt_templates_${t.email}`,u=localStorage.getItem(v);r(u?JSON.parse(u):["Salom! Sizga qanday yordam bera olaman?","Rahmat! Tez orada aloqaga chiqamiz."])},[t]);const L=v=>{if(!t)return;const u=`tt_templates_${t.email}`;localStorage.setItem(u,JSON.stringify(v)),r(v)};return!a||!t?null:e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border bg-background p-5 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Xabar shablonlari"}),e.jsx("div",{className:"space-y-2 mb-3",children:i.map((v,u)=>e.jsxs("div",{className:"flex items-center justify-between border rounded p-2",children:[e.jsx("div",{className:"text-sm",children:v}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{const l=i.filter((k,w)=>w!==u);L(l)},className:"px-2 py-1 rounded bg-destructive text-destructive-foreground",children:"O'chirish"})})]},u))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:d,onChange:v=>x(v.target.value),placeholder:"Yangi shablon...",className:"flex-1 rounded-md bg-secondary px-3 py-2"}),e.jsx(S,{onClick:()=>{if(!d.trim())return;const v=[...i,d.trim()];L(v),x("")},children:"Qo'shish"})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(S,{variant:"outline",onClick:n,children:"Yopish"})})]})})}function Nt({open:a,onClose:n}){const{user:t,updateUser:o,addToBlocklist:i,removeFromBlocklist:r}=Z(),[d,x]=s.useState(()=>({aiForGroups:t?.settings?.aiForGroups??!1,aiForPrivate:t?.settings?.aiForPrivate??!1})),[L,v]=s.useState("");if(!a||!t)return null;const u=()=>{o(l=>({...l,settings:{aiForGroups:d.aiForGroups,aiForPrivate:d.aiForPrivate}})),n()};return e.jsx("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border bg-background p-5 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sozlamalar"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"AI avtomatik javob (Guruhlar)"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Guruhlarda AI avtojavobni yoqish/oâ€˜chirish"})]}),e.jsx("label",{className:"inline-flex items-center gap-2",children:e.jsx("input",{type:"checkbox",checked:d.aiForGroups,onChange:l=>x(k=>({...k,aiForGroups:l.target.checked}))})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"AI avtomatik javob (Shaxsiy)"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Shaxsiy chatlar uchun AI-avtojavobni yoqish/oâ€˜chirish"})]}),e.jsx("label",{className:"inline-flex items-center gap-2",children:e.jsx("input",{type:"checkbox",checked:d.aiForPrivate,onChange:l=>x(k=>({...k,aiForPrivate:l.target.checked}))})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"font-medium mb-1",children:"Mass xabar blocklist"}),e.jsx("div",{className:"text-xs text-muted-foreground mb-3",children:"Bu roâ€˜yxatdagi shaxsiy chat foydalanuvchilariga mass xabar yuborilmaydi."}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{value:L,onChange:l=>v(l.target.value),placeholder:"Foydalanuvchi nomi",className:"flex-1 rounded-md bg-secondary px-3 py-2 text-sm"}),e.jsx(S,{onClick:()=>{const l=L.trim();l&&(i(l),v(""))},children:"Qoâ€˜shish"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.blocklist??[]).length===0?e.jsx("div",{className:"text-xs text-muted-foreground",children:"Roâ€˜yxat boâ€˜sh."}):(t.blocklist??[]).map(l=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs",children:[l,e.jsx("button",{onClick:()=>r(l),className:"text-muted-foreground hover:text-foreground","aria-label":`Olib tashlash: ${l}`,children:"Ã—"})]},l))})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(S,{variant:"outline",onClick:n,children:"Bekor"}),e.jsx(S,{onClick:u,children:"Saqlash"})]})]})})}const re=768;function Ct(){const[a,n]=s.useState(void 0);return s.useEffect(()=>{const t=window.matchMedia(`(max-width: ${re-1}px)`),o=()=>{n(window.innerWidth<re)};return t.addEventListener("change",o),n(window.innerWidth<re),()=>t.removeEventListener("change",o)},[]),!!a}function zt(){const{user:a,switchTelegramAccount:n}=Z(),t=Ct(),[o,i]=s.useState(!1),[r,d]=s.useState(!1),[x,L]=s.useState(!1),[v,u]=s.useState(!1),[l,k]=s.useState(!1),[w,g]=s.useState(()=>{try{return localStorage.getItem("tt_chat_sidebar_collapsed")==="1"}catch{return!1}}),p=a?.telegramAccounts.find(h=>h.id===a.activeTelegramAccountId)??a?.telegramAccounts[0]??null,[A,I]=s.useState([]),[f,M]=s.useState([]),[z,$]=s.useState(!1),[K,U]=s.useState(!1),[O,m]=s.useState("private");s.useEffect(()=>{(async()=>{if(p?.index){$(!0);try{const N=await pe.fetchPrivateChats(p.index);if(N.ok){const E="http://localhost:8002",R=N.items.map(C=>({id:C.id.toString(),name:C.full_name||C.username||"Unknown",type:"private",avatar:C.has_photo?`${E}${C.photo_url}`:void 0}));I(R)}}catch(N){console.error("Failed to fetch private chats",N)}finally{$(!1)}}})()},[p?.index]),s.useEffect(()=>{(async()=>{if(!(!p?.index||O!=="group"||f.length>0)){U(!0);try{const N=await pe.fetchGroups(p.index);if(N.ok){const E="http://localhost:8002",R=N.items.map(C=>({id:C.id.toString(),name:C.title,type:"group",avatar:C.has_photo?`${E}${C.photo_url}`:void 0}));M(R)}}catch(N){console.error("Failed to fetch groups",N)}finally{U(!1)}}})()},[p?.index,O,f.length]),s.useEffect(()=>{try{localStorage.setItem("tt_chat_sidebar_collapsed",w?"1":"0")}catch{}},[w]);const b=s.useMemo(()=>[...A,...f],[A,f]),[y,c]=s.useState({1:[{id:"m1",sender:"them",text:"Salom! Yordam bera olamanmi?",at:Date.now()-6e5},{id:"m2",sender:"me",text:"Assalomu alaykum! Ha, hisob ulashmoqchi edim.",at:Date.now()-57e4},{id:"m3",sender:"them",text:"Qaysi hisob haqida gapiryapsiz?",at:Date.now()-54e4},{id:"m4",sender:"me",text:"Telegram hisobim haqida. Yangi loyihamiz uchun.",at:Date.now()-51e4},{id:"m5",sender:"them",text:"Tushundim. Ma'lumotlaringizni yuboring.",at:Date.now()-48e4},{id:"m6",sender:"me",text:"Albatta, hoziroq yuboraman.",at:Date.now()-45e4},{id:"m7",sender:"them",text:"Rahmat. Ko'rib chiqaman.",at:Date.now()-3e4}],2:[{id:"m8",sender:"them",text:"Qanday yordam kerak?",at:Date.now()-72e4},{id:"m9",sender:"me",text:"Mahsulot haqida ma'lumot beraman.",at:Date.now()-69e4},{id:"m10",sender:"them",text:"Qaysi mahsulot?",at:Date.now()-66e4},{id:"m11",sender:"me",text:"Yangi smartfon modelimiz.",at:Date.now()-63e4},{id:"m12",sender:"them",text:"Narxi qancha?",at:Date.now()-6e5},{id:"m13",sender:"me",text:"2 million so'mdan boshlanadi.",at:Date.now()-57e4},{id:"m14",sender:"them",text:"Qiziqarli. Ko'proq ma'lumot bering.",at:Date.now()-12e4}],3:[{id:"m15",sender:"them",text:"Loyiha qachon tugaydi?",at:Date.now()-9e5},{id:"m16",sender:"me",text:"Keyingi oy oxirida.",at:Date.now()-87e4},{id:"m17",sender:"them",text:"Jadvalga rioya qilamizmi?",at:Date.now()-84e4},{id:"m18",sender:"me",text:"Ha, barcha vazifalar bajarildi.",at:Date.now()-81e4},{id:"m19",sender:"them",text:"Ajoyib! Mijozga xabar beraman.",at:Date.now()-18e4}],4:[{id:"m20",sender:"them",text:"Texnik yordam kerak.",at:Date.now()-108e4},{id:"m21",sender:"me",text:"Qanday muammo bor?",at:Date.now()-105e4},{id:"m22",sender:"them",text:"Kompyuter sekin ishlayapti.",at:Date.now()-102e4},{id:"m23",sender:"me",text:"Qaysi operatsion sistema?",at:Date.now()-99e4},{id:"m24",sender:"them",text:"Windows 10.",at:Date.now()-96e4},{id:"m25",sender:"me",text:"Diagnostika qilaman. Kuting.",at:Date.now()-24e4}],5:[{id:"m26",sender:"user1",text:"Yangi kampaniya boshlandi!",at:Date.now()-12e5},{id:"m27",sender:"user2",text:"Ajoyib! Qanday natija kutmoqdamiz?",at:Date.now()-117e4},{id:"m28",sender:"me",text:"Kampaniya muvaffaqiyatli bo'lsin!",at:Date.now()-114e4},{id:"m29",sender:"user3",text:"Men ham qo'shilaman!",at:Date.now()-111e4},{id:"m30",sender:"user4",text:"Byudjet qancha?",at:Date.now()-108e4},{id:"m31",sender:"me",text:"5 million so'm ajratildi.",at:Date.now()-105e4},{id:"m32",sender:"user1",text:"Yaxshi, boshladik!",at:Date.now()-3e5}],6:[{id:"m33",sender:"user3",text:"Savdo ko'rsatkichlari yaxshi.",at:Date.now()-132e4},{id:"m34",sender:"me",text:"Qaysi oy uchun?",at:Date.now()-129e4},{id:"m35",sender:"user3",text:"O'tgan oy.",at:Date.now()-126e4},{id:"m36",sender:"me",text:"Foiz qancha o'sish bor?",at:Date.now()-123e4},{id:"m37",sender:"user3",text:"15% o'sish.",at:Date.now()-36e4}],7:[{id:"m38",sender:"them",text:"Salom do'stim!",at:Date.now()-144e4},{id:"m39",sender:"me",text:"Salom! Qandaysan?",at:Date.now()-141e4},{id:"m40",sender:"them",text:"Yaxshi, rahmat. Sen-chi?",at:Date.now()-138e4},{id:"m41",sender:"me",text:"Men ham yaxshi. Ishlar qalay?",at:Date.now()-42e4}],8:[{id:"m42",sender:"them",text:"Yordam bera olasizmi?",at:Date.now()-156e4},{id:"m43",sender:"me",text:"Albatta, nima yordam kerak?",at:Date.now()-153e4},{id:"m44",sender:"them",text:"Darsda tushunmaganman.",at:Date.now()-15e5},{id:"m45",sender:"me",text:"Qaysi mavzu?",at:Date.now()-147e4},{id:"m46",sender:"them",text:"Matematika.",at:Date.now()-48e4}],9:[{id:"m47",sender:"them",text:"Loyiha muhokamasi.",at:Date.now()-168e4},{id:"m48",sender:"me",text:"Qachon uchrashamiz?",at:Date.now()-165e4},{id:"m49",sender:"them",text:"Ertaga soat 10:00 da.",at:Date.now()-162e4},{id:"m50",sender:"me",text:"Yaxshi, kelaman.",at:Date.now()-54e4}],10:[{id:"m51",sender:"them",text:"Tadbir haqida gaplashaylik.",at:Date.now()-18e5},{id:"m52",sender:"me",text:"Qaysi tadbir?",at:Date.now()-177e4},{id:"m53",sender:"them",text:"Kompaniya yubileyi.",at:Date.now()-174e4},{id:"m54",sender:"me",text:"Qachon bo'ladi?",at:Date.now()-171e4},{id:"m55",sender:"them",text:"Keyingi oy.",at:Date.now()-6e5}],11:[{id:"m56",sender:"them",text:"Yangi loyiha taklifi.",at:Date.now()-192e4},{id:"m57",sender:"me",text:"Qanday loyiha?",at:Date.now()-189e4},{id:"m58",sender:"them",text:"Mobil ilova.",at:Date.now()-186e4},{id:"m59",sender:"me",text:"Qiziq. Batafsil aytib bering.",at:Date.now()-66e4}],12:[{id:"m60",sender:"them",text:"Uchrashuv belgilaylik.",at:Date.now()-204e4},{id:"m61",sender:"me",text:"Qachon qulay?",at:Date.now()-201e4},{id:"m62",sender:"them",text:"Bugun kechqurun.",at:Date.now()-198e4},{id:"m63",sender:"me",text:"Soat 18:00 da bo'ladi.",at:Date.now()-72e4}],13:[{id:"m64",sender:"user4",text:"Frontend kod review qilindi.",at:Date.now()-216e4},{id:"m65",sender:"user5",text:"Yaxshi ish! Bug'lar tuzatildi.",at:Date.now()-213e4},{id:"m66",sender:"me",text:"Rahmat jamoa!",at:Date.now()-21e5},{id:"m67",sender:"user6",text:"Testlar o'tkazildi.",at:Date.now()-207e4},{id:"m68",sender:"user4",text:"Deployment tayyor.",at:Date.now()-204e4},{id:"m69",sender:"me",text:"Ajoyib! Deploy qilamiz.",at:Date.now()-78e4}],14:[{id:"m70",sender:"user6",text:"Mijoz shikoyati kelib tushdi.",at:Date.now()-228e4},{id:"m71",sender:"me",text:"Qanday shikoyat?",at:Date.now()-225e4},{id:"m72",sender:"user6",text:"Yetkazib berish kechikdi.",at:Date.now()-222e4},{id:"m73",sender:"me",text:"Mijozga uzr so'raymiz.",at:Date.now()-219e4},{id:"m74",sender:"user6",text:"Yaxshi, men hal qilaman.",at:Date.now()-84e4}],15:[{id:"m75",sender:"user7",text:"Oilaviy uchrashuv rejalashtirildi.",at:Date.now()-24e5},{id:"m76",sender:"me",text:"Qachon?",at:Date.now()-237e4},{id:"m77",sender:"user7",text:"Shanba kuni.",at:Date.now()-234e4},{id:"m78",sender:"me",text:"Barcha keladimi?",at:Date.now()-231e4},{id:"m79",sender:"user7",text:"Ha, hamma keladi.",at:Date.now()-9e5}]}),[j,P]=s.useState(null);s.useEffect(()=>{!t&&!j&&P(b[0]?.id??null)},[t,b]);const F=j?y[j]??[]:[],q=b.find(h=>h.id===j)?.name??"",J=h=>{j&&c(N=>({...N,[j]:[...N[j]??[],h.attachment?"file"in h.attachment?{id:Math.random().toString(36).slice(2),sender:"me",at:Date.now(),file:{type:h.attachment.type,url:URL.createObjectURL(h.attachment.file),name:h.attachment.file.name}}:{id:Math.random().toString(36).slice(2),sender:"me",at:Date.now(),file:{type:"location",url:h.attachment.url,name:h.attachment.name}}:{id:Math.random().toString(36).slice(2),sender:"me",text:h.text??"",at:Date.now()}]}))},V=h=>{const N=new Set(a?.blocklist??[]),E=b.filter(R=>R.type==="private"&&!N.has(R.name));c(R=>{const C={...R};return E.forEach(T=>{const ue=C[T.id]??[];ue.push({id:Math.random().toString(36).slice(2),sender:"me",text:h,at:Date.now()}),C[T.id]=ue}),C})},Q=({name:h,type:N})=>{const E=b.find(T=>T.name===h&&T.type===N);if(E){P(E.id);return}const R=Math.random().toString(36).slice(2),C={id:R,name:h,type:N,avatar:"/placeholder.svg"};N==="private"?I(T=>[...T,C]):M(T=>[...T,C]),c(T=>({...T,[R]:[]})),P(R)};return p?e.jsxs("div",{className:"py-6 px-6",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[e.jsxs(de,{children:[e.jsx(ce,{asChild:!0,children:e.jsxs("button",{className:"inline-flex items-center gap-2 text-sm text-left hover:opacity-90",children:[p?.profile_picture?e.jsx("img",{src:p.profile_picture,alt:p.name,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary text-white grid place-items-center font-semibold text-xs",children:p?.name.split(" ").map(h=>h[0]).slice(0,2).join("")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-medium",children:p?.name||"â€” hisob tanlanmagan â€”"}),p?.phone&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",p.phone.slice(0,3)," ",p.phone.slice(3,5)," ",p.phone.slice(5,8)," ",p.phone.slice(8,10)," ",p.phone.slice(10)]})]}),e.jsx(he,{className:"h-3 w-3"})]})}),e.jsxs(me,{align:"start",children:[a?.telegramAccounts.map(h=>e.jsxs(_,{onClick:()=>n(h.id),className:`flex items-center gap-2 ${h.id===a.activeTelegramAccountId?"bg-accent":""}`,children:[h.profile_picture?e.jsx("img",{src:h.profile_picture,alt:h.name,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary text-white grid place-items-center font-semibold text-xs",children:h.name.split(" ").map(N=>N[0]).slice(0,2).join("")}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-medium",children:h.name}),h.phone&&e.jsxs("div",{className:"text-xs",children:["+",h.phone.slice(0,3)," ",h.phone.slice(3,5)," ",h.phone.slice(5,8)," ",h.phone.slice(8,10)," ",h.phone.slice(10)]})]})]},h.id)),e.jsx(oe,{}),e.jsx(_,{onClick:()=>L(!0),children:"Hisob boshqarish"})]})]}),e.jsx(S,{size:"sm",className:"text-white",onClick:()=>d(!0),children:"Hisob qo'shish"}),e.jsx(S,{size:"sm",variant:"secondary",onClick:()=>i(!0),children:"Mass xabar"}),e.jsx(S,{size:"sm",variant:"ghost",onClick:()=>u(!0),children:"Shablonlar"}),e.jsx(S,{size:"sm",variant:"ghost",onClick:()=>k(!0),children:"Sozlamalar"})]}),e.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:p?p.name:"Hisob yo'q"}),e.jsx(St,{onAdd:()=>{},onMass:()=>i(!0),onTemplates:()=>u(!0),onSettings:()=>k(!0),onAccounts:()=>L(!0)})]}),e.jsx("div",{className:"text-xs text-muted-foreground hidden sm:block",children:"Offline rejim qo'llab-quvvatlanadi"})]}),t?e.jsx("div",{className:"rounded-xl border overflow-hidden h-[70vh] flex flex-col",children:j?e.jsxs("div",{className:"flex flex-col h-[70vh] min-h-0",children:[e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(ve,{title:q,status:"online",messages:F,onBack:()=>P(null)})}),e.jsx(ke,{onSend:J})]}):e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(fe,{chats:b,currentId:null,onSelect:P,onCreateChat:Q,user:a,loadingPrivate:z,loadingGroups:K,emptyMessage:"Chatlar yo'q",tab:O,onTabChange:m})})}):e.jsxs("div",{className:"flex gap-3 rounded-xl border overflow-hidden h-[70vh]",children:[e.jsx(fe,{chats:b,currentId:j,onSelect:P,onCreateChat:Q,user:a,collapsed:w,onToggleCollapsed:()=>g(h=>!h),loadingPrivate:z,loadingGroups:K,emptyMessage:"Chatlar yo'q",tab:O,onTabChange:m}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(ve,{title:q,status:"online",messages:F,collapsed:w})}),e.jsx(ke,{onSend:J})]})]}),e.jsx(jt,{open:r,onClose:()=>d(!1),onSuccess:h=>{console.log("Account added successfully:",h)}}),e.jsx(ht,{open:o,onClose:()=>i(!1),onSend:V}),e.jsx(yt,{open:x,onClose:()=>L(!1)}),e.jsx(wt,{open:v,onClose:()=>u(!1)}),e.jsx(Nt,{open:l,onClose:()=>k(!1)})]}):e.jsx("div",{className:"py-6 px-6",children:"Loading..."})}function St({onAdd:a,onMass:n,onTemplates:t,onSettings:o,onAccounts:i}){return e.jsxs(de,{children:[e.jsx(ce,{asChild:!0,children:e.jsx("button",{className:"rounded-md border px-2 py-2 hover:bg-accent/40","aria-label":"Amallar",title:"Amallar",children:e.jsx(Ba,{className:"h-4 w-4"})})}),e.jsxs(me,{align:"end",children:[e.jsx(_,{onClick:i,children:"Hozirgi hisob"}),e.jsx(_,{onClick:a,children:"Hisob qo'shish"}),e.jsx(_,{onClick:n,children:"Mass xabar"}),e.jsx(_,{onClick:t,children:"Shablonlar"}),e.jsx(_,{onClick:o,children:"Sozlamalar"})]})]})}export{zt as default};
